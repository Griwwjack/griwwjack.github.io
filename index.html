<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Usuário</title>
</head>

<body>
    <h2>Cadastro de Usuário</h2>
    <form id="userForm">
        <label for="nome">Nome:</label><br>
        <input type="text" id="nome" name="nome" required><br><br>
        
        <label for="idade">Idade:</label><br>
        <input type="number" id="idade" name="idade" required><br><br>
        
        <label for="salary">Salário:</label><br>
        <input type="number" id="salario" name="salario" required><br><br>
        
        <input type="submit" value="Cadastrar">
    </form>

    <div id="result"></div>

    <script>
        let userCount = 0;

        document.getElementById('userForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const nome = document.getElementById('nome').value;
            const idade = document.getElementById('idade').value;
            const salario = document.getElementById('salario').value;

            userCount++;

            const userData = {
                id: userCount,
                nome: nome,
                idade: idade,
                salario: salario
            };

            saveData(userData);
            showUserData(userData);
        });


/* Função para salvar os dados em um arquivo .json */
        function saveData(data) {
            const jsonData = JSON.stringify(data, null, 4);
            const blob = new Blob([jsonData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = `user_data_${data.id}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }


/* Função que retorna os dados para o usuário na mesma página. */
        function showUserData(data) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <h2>Dados Cadastrados</h2>
                <p>ID: ${data.id}</p>
                <p>Nome: ${data.nome}</p>
                <p>Idade: ${data.idade}</p>
                <p>Salário: R$${data.salario}</p>
            `;
        }
    </script>
</body>
</html>
